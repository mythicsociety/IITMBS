<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L3.6: Pseudocode for Procedures and Parameters (Part 1)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .sidebar-link.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0c4a6e; /* sky-900 */
            font-weight: 600;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .feedback {
            display: none;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
        }
        .feedback.correct {
            display: block;
            background-color: #f0fdf4; /* green-50 */
            color: #15803d; /* green-800 */
        }
        .feedback.incorrect {
            display: block;
            background-color: #fef2f2; /* red-50 */
            color: #b91c1c; /* red-800 */
        }
        .code-block {
            background-color: #0f172a; /* slate-900 */
            color: #e2e8f0; /* slate-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .code-keyword { color: #7dd3fc; } /* sky-300 */
        .code-variable { color: #f8fafc; } /* slate-50 */
        .code-value { color: #fcd34d; } /* amber-300 */
        .code-comment { color: #94a3b8; } /* slate-400 */
        .code-proc { color: #a5b4fc; } /* indigo-300 */
    </style>
</head>
<body class="text-slate-800">

    <!-- Mobile Header with Hamburger Menu -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40 lg:hidden flex items-center justify-between p-4">
        <h1 class="text-lg font-bold text-sky-800">Learning Guide</h1>
        <button id="hamburger-btn" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </header>

    <div class="flex">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="bg-white w-64 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:sticky lg:top-0 h-screen transition-transform duration-300 ease-in-out z-50 shadow-lg lg:shadow-none border-r border-slate-200">
            <div class="p-6">
                <h2 class="text-xl font-bold text-sky-800 mb-6">L3.6: Pseudocode for Procedures</h2>
                <nav>
                    <ul id="nav-links" class="space-y-2">
                        <li><a href="#intro" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Introduction</a></li>
                        <li><a href="#problem" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">The Problem of Repetition</a></li>
                        <li><a href="#solution" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Solution: Procedures</a></li>
                        <li><a href="#parameters" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Adding Parameters</a></li>
                        <li><a href="#calling" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Calling a Procedure</a></li>
                        <li><a href="#interactive-sim" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Interactive Procedure Simulator</a></li>
                        <li><a href="#quiz" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Knowledge Check</a></li>
                    </ul>
                </nav>
            </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 p-6 md:p-10 lg:p-12 bg-slate-50 min-h-screen lg:h-screen lg:overflow-y-auto">
            <div class="max-w-4xl mx-auto">

                <!-- Introduction Section -->
                <section id="intro" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Writing Reusable Code</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        In the last lesson, we introduced the idea of procedures as a way to avoid repeating ourselves. Now, we will formalize how to write these reusable blocks of logic in pseudocode.
                    </p>
                    <p class="text-lg text-slate-700">
                        This is a cornerstone of efficient programming. By creating procedures, we make our code more organized, easier to read, and much simpler to maintain and improve.
                    </p>
                </section>

                <!-- The Repetition Problem Section -->
                <section id="problem" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Problem of Repetition</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        Imagine we need to find the sum of Maths marks for boys, and also the sum of Maths marks for girls. We would end up writing two almost identical blocks of pseudocode.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="code-block">
                            <span class="code-comment">// Sum for Boys</span><br>
                            <span class="code-variable">BoySum</span> = <span class="code-value">0</span><br>
                            <span class="code-keyword">while</span> (more cards) {<br>
                            &nbsp;&nbsp;...<br>
                            &nbsp;&nbsp;<span class="code-keyword">if</span> (X.Gender == "M") {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">BoySum</span> += X.Maths<br>
                            &nbsp;&nbsp;}<br>
                            }
                        </div>
                        <div class="code-block">
                            <span class="code-comment">// Sum for Girls</span><br>
                            <span class="code-variable">GirlSum</span> = <span class="code-value">0</span><br>
                            <span class="code-keyword">while</span> (more cards) {<br>
                            &nbsp;&nbsp;...<br>
                            &nbsp;&nbsp;<span class="code-keyword">if</span> (X.Gender == "F") {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">GirlSum</span> += X.Maths<br>
                            &nbsp;&nbsp;}<br>
                            }
                        </div>
                    </div>
                     <p class="text-lg text-slate-700 mt-4">
                        The only difference is the value we're checking for (`"M"` vs `"F"`). This duplication is inefficient and error-prone.
                    </p>
                </section>

                <!-- The Solution Section -->
                <section id="solution" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Solution: Defining a Procedure</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        We can abstract this logic into a single, reusable <strong>procedure</strong>. We give it a name and define the steps it will perform. The `return` keyword specifies what value the procedure should send back after it's finished.
                    </p>
                    <div class="code-block">
                        <span class="code-keyword">Procedure</span> <span class="code-proc">SumMaths</span>(<span class="code-variable">gen</span>) {<br>
                        &nbsp;&nbsp;<span class="code-variable">Sum</span> = <span class="code-value">0</span><br>
                        &nbsp;&nbsp;<span class="code-keyword">while</span> (Pile 1 has more cards) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;... pick and move card X ...<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-variable">X.Gender</span> == <span class="code-variable">gen</span>) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">Sum</span> = <span class="code-variable">Sum</span> + <span class="code-variable">X.Maths</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;<span class="code-keyword">return</span>(<span class="code-variable">Sum</span>)<br>
                        }
                    </div>
                </section>
                
                <!-- Parameters Section -->
                <section id="parameters" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Adding Parameters for Flexibility</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        The real power comes from <strong>parameters</strong>. The `(gen)` in our procedure definition is a parameter. It's a placeholder for a value that will be provided when the procedure is called.
                    </p>
                     <p class="text-lg text-slate-700 mb-4">
                        We can make it even more powerful by adding a second parameter for the subject field.
                    </p>
                    <div class="code-block">
                        <span class="code-keyword">Procedure</span> <span class="code-proc">SumMarks</span>(<span class="code-variable">gen</span>, <span class="code-variable">fld</span>) {<br>
                        &nbsp;&nbsp;<span class="code-variable">Sum</span> = <span class="code-value">0</span><br>
                        &nbsp;&nbsp;... loop through cards ...<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-variable">X.Gender</span> == <span class="code-variable">gen</span>) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">Sum</span> = <span class="code-variable">Sum</span> + <span class="code-variable">X</span>.<span class="code-proc">fld</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;...<br>
                        &nbsp;&nbsp;<span class="code-keyword">return</span>(<span class="code-variable">Sum</span>)<br>
                        }
                    </div>
                </section>

                 <!-- Calling a Procedure Section -->
                <section id="calling" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Calling a Procedure</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        Once a procedure is defined, we can "call" it by its name and provide concrete values for its parameters. We can then assign the returned value to a variable.
                    </p>
                    <div class="code-block">
                        <span class="code-comment">// Call the procedure for Girls' Chemistry marks</span><br>
                        <span class="code-variable">GirlChemSum</span> = <span class="code-proc">SumMarks</span>("F", Chemistry)<br><br>
                        <span class="code-comment">// Call it again for Boys' Physics marks</span><br>
                        <span class="code-variable">BoyPhysSum</span> = <span class="code-proc">SumMarks</span>("M", Physics)
                    </div>
                     <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg my-6">
                        <p class="font-semibold">Important Note:</p>
                        <p>A procedure does not *have* to return a value. Some procedures just perform an action, like updating a card. In that case, we just call the procedure on its own line without assigning its result to anything.</p>
                    </div>
                </section>

                <!-- Interactive Simulator Section -->
                <section id="interactive-sim" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">⚙️ Interactive Procedure Simulator</h2>
                    <p class="text-lg text-slate-700 mb-6">
                        This simulator has the `SumMarks(gen, fld)` procedure built-in. Click the buttons to call the procedure with different parameters and see the result it returns.
                    </p>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <div class="flex flex-wrap justify-center gap-4 mb-4">
                            <button data-gender="F" data-subject="math" class="param-btn px-4 py-2 bg-pink-500 text-white font-semibold rounded-lg shadow-md hover:bg-pink-600">SumMarks("F", Maths)</button>
                            <button data-gender="M" data-subject="math" class="param-btn px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">SumMarks("M", Maths)</button>
                            <button data-gender="F" data-subject="phys" class="param-btn px-4 py-2 bg-pink-500 text-white font-semibold rounded-lg shadow-md hover:bg-pink-600">SumMarks("F", Physics)</button>
                            <button data-gender="M" data-subject="phys" class="param-btn px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600">SumMarks("M", Physics)</button>
                        </div>
                        <div id="sim-status" class="text-center font-semibold text-lg h-8 mb-4 text-slate-700">Call a procedure to see the result.</div>
                         <div class="flex justify-center items-center gap-8">
                            <div class="text-center">
                                <h4 class="font-bold mb-2">Return Value</h4>
                                <div class="w-32 h-32 bg-white rounded-full shadow-lg border-4 border-amber-400 flex flex-col justify-center items-center">
                                     <span id="return-value" class="text-4xl font-bold text-amber-600">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Quiz Section -->
                <section id="quiz">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">🧠 Knowledge Check</h2>
                    <p class="text-lg text-slate-700 mb-8">
                        Test your understanding of pseudocode procedures.
                    </p>
                    <div id="quiz-container" class="space-y-8"></div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // --- Sidebar and Scroll Logic ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const navLinks = document.getElementById('nav-links');

        hamburgerBtn.addEventListener('click', () => sidebar.classList.toggle('-translate-x-full'));
        navLinks.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
            }
        });
        
        const sections = document.querySelectorAll('section');
        const links = document.querySelectorAll('.sidebar-link');
        mainContent.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (mainContent.scrollTop >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            links.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === `#${current}`);
            });
        });

        // --- Interactive Simulator Logic ---
        const simStatus = document.getElementById('sim-status');
        const returnValueEl = document.getElementById('return-value');
        const paramBtns = document.querySelectorAll('.param-btn');
        
        const simStudents = [
            { gender: "M", math: 97, phys: 92 }, { gender: "F", math: 97, phys: 91 },
            { gender: "F", math: 72, phys: 92 }, { gender: "M", math: 84, phys: 92 },
            { gender: "M", math: 93, phys: 68 }, { gender: "F", math: 62, phys: 80 }
        ];

        function runProcedure(gender, subject) {
            paramBtns.forEach(btn => btn.disabled = true);
            simStatus.textContent = `Running SumMarks("${gender}", ${subject})...`;
            returnValueEl.textContent = '...';

            let sum = 0;
            simStudents.forEach(card => {
                if (card.gender === gender) {
                    sum += card[subject];
                }
            });
            
            setTimeout(() => {
                returnValueEl.textContent = sum;
                simStatus.textContent = `Procedure finished. Returned ${sum}.`;
                paramBtns.forEach(btn => btn.disabled = false);
            }, 1500);
        }

        paramBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                runProcedure(btn.dataset.gender, btn.dataset.subject);
            });
        });
        
        // --- Quiz Logic ---
        const quizContainer = document.getElementById('quiz-container');
        const quizData = [
            { question: "Which expression calculates the sum of maths marks of all students? (MSQ)", options: ["SumMaths(M, F)", "SumMaths(F, M)", "SumMaths(F) + SumMaths(M)", "SumMaths(M) + SumMaths(F)"], correct: ["SumMaths(F) + SumMaths(M)", "SumMaths(M) + SumMaths(F)"], type: "multiple", explanation: "To get the total for all students, you must call the procedure once for each gender and then add their results together. The order of addition does not matter." },
            { question: "What would be the value stored in the variable `marks` if we call `marks = SumMaths(Z)`?", options: [], correct: ["0"], type: "custom", explanation: "The procedure would run, but the condition `X.Gender == 'Z'` would never be true. The `Sum` variable would remain at its initial value of 0, which would then be returned." },
            { question: "What does the Mystery procedure compute?", image: "https://i.imgur.com/8E0vj1N.png", options: ["Sum of physics marks of all students", "Sum of physics marks for gender `gen`", "Average physics marks for gender `gen`", "Average physics marks of all students"], correct: ["Average physics marks for gender `gen`"], type: "single", explanation: "The procedure filters by the `gen` parameter, calculates both the `sum` and `count` for that group, and finally returns `sum / count`, which is the average." },
            { question: "Consider `SumMarks(gen, fld)`. Statement-1: `SumMarks(M, Physics)`. Statement-2: `SumMarks(Physics, M)`.", options: ["Statement-1 is correct, Statement-2 is wrong", "Statement-1 is wrong, Statement-2 is correct", "Both are correct", "Both are wrong"], correct: ["Statement-1 is correct, Statement-2 is wrong"], type: "single", explanation: "The order of parameters matters. The procedure expects the gender first, then the field. Statement-2 provides them in the wrong order and would lead to an error." },
            { question: "True or False: A procedure must always return a value.", options: ["True", "False"], correct: ["False"], type: "single", explanation: "False. Some procedures are called only for their 'side effect', like updating a value on a card or sorting a list, and do not need to return a specific value." },
            { question: "True or False: A procedure cannot have more than three arguments.", options: ["True", "False"], correct: ["False"], type: "single", explanation: "False. A procedure can have zero, one, or many arguments, depending on what information it needs to perform its task." },
            { question: "Is the following statement valid: `SumMarks(F, Chemistry) = 10`?", options: ["Yes", "No"], correct: ["No"], type: "single", explanation: "No. A procedure call is an expression that produces a value; you cannot assign a value *to* it. The correct form is `MyVariable = SumMarks(F, Chemistry)`." }
        ];

        function buildQuiz() {
            quizContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                let optionsHtml = '';
                if(q.type === 'custom') {
                    optionsHtml = `<input type="text" name="q${index}" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500">`;
                } else {
                    optionsHtml = q.options.map(option => `
                        <label class="quiz-option block p-3 border-2 border-slate-200 rounded-lg hover:bg-sky-50 cursor-pointer transition-colors">
                            <input type="${q.type === 'multiple' ? 'checkbox' : 'radio'}" name="q${index}" value="${option}" class="mr-3">
                            ${option}
                        </label>
                    `).join('');
                }
                const imageHtml = q.image ? `<img src="${q.image}" alt="Quiz question image" class="my-4 border rounded-md">` : '';
                const questionHtml = `
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <p class="text-lg font-semibold mb-4">${index + 1}. ${q.question}</p>
                        ${imageHtml}
                        <div class="space-y-3" id="q${index}-options">${optionsHtml}</div>
                        <div id="feedback-${index}" class="feedback"></div>
                    </div>
                `;
                quizContainer.innerHTML += questionHtml;
            });
            quizData.forEach((q, index) => {
                document.getElementById(`q${index}-options`).addEventListener('change', () => handleAnswer(q, index));
            });
        }

        function handleAnswer(questionData, questionIndex) {
            const feedbackEl = document.getElementById(`feedback-${questionIndex}`);
            const inputs = document.querySelectorAll(`[name="q${questionIndex}"]`);
            let selectedAnswers = [];
            inputs.forEach(input => {
                if (input.type === 'text' && input.value !== '') {
                    selectedAnswers.push(input.value);
                } else if (input.checked) {
                    selectedAnswers.push(input.value);
                }
                input.disabled = true;
            });
            let isCorrect;
            if (questionData.type === 'multiple') {
                 isCorrect = selectedAnswers.length === questionData.correct.length && selectedAnswers.every(val => questionData.correct.includes(val));
            } else {
                isCorrect = selectedAnswers.length === 1 && selectedAnswers[0] === questionData.correct[0];
            }
            
            inputs.forEach(input => {
                const label = input.parentElement;
                if (input.type !== 'text' && questionData.correct.includes(input.value)) {
                    label.classList.add('correct');
                } else if (input.checked || (input.type === 'text' && input.value !== '')) {
                     if(!isCorrect) label.classList.add('incorrect');
                     else label.classList.add('correct');
                }
            });

            feedbackEl.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${questionData.explanation}`;
            feedbackEl.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
        }

        buildQuiz();
    </script>
</body>
</html>
