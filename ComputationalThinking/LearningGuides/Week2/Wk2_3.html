<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L2.3: Local Operations and Max in a Single Iteration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .sidebar-link.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0c4a6e; /* sky-900 */
            font-weight: 600;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .feedback {
            display: none;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
        }
        .feedback.correct {
            display: block;
            background-color: #f0fdf4; /* green-50 */
            color: #15803d; /* green-800 */
        }
        .feedback.incorrect {
            display: block;
            background-color: #fef2f2; /* red-50 */
            color: #b91c1c; /* red-800 */
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Mobile Header with Hamburger Menu -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40 lg:hidden flex items-center justify-between p-4">
        <h1 class="text-lg font-bold text-sky-800">Learning Guide</h1>
        <button id="hamburger-btn" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </header>

    <div class="flex">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="bg-white w-64 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:sticky lg:top-0 h-screen transition-transform duration-300 ease-in-out z-50 shadow-lg lg:shadow-none border-r border-slate-200">
            <div class="p-6">
                <h2 class="text-xl font-bold text-sky-800 mb-6">L2.3: Complex Max Finding</h2>
                <nav>
                    <ul id="nav-links" class="space-y-2">
                        <li><a href="#intro" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Introduction</a></li>
                        <li><a href="#challenge" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">A New Challenge</a></li>
                        <li><a href="#solution" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">The Two-Variable Solution</a></li>
                        <li><a href="#interactive-sim" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Interactive Simulator</a></li>
                        <li><a href="#quiz" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Knowledge Check</a></li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 p-6 md:p-10 lg:p-12 bg-slate-50 min-h-screen lg:h-screen lg:overflow-y-auto">
            <div class="max-w-4xl mx-auto">

                <!-- Introduction Section -->
                <section id="intro" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Beyond Simple Comparisons</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        In the last section, we learned how to find a maximum value (like the highest score) when that value was written directly on each "card" we looked at. That's great, but what happens when the value we want to maximize isn't so obvious?
                    </p>
                    <p class="text-lg text-slate-700">
                        Sometimes, we first need to perform a <strong>local operation</strong>—a calculation across a *group* of items—to get a value. Only then can we compare that calculated value to our "max so far". This section explores this more complex, but very common, scenario.
                    </p>
                </section>

                <!-- The Challenge Section -->
                <section id="challenge" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Challenge: Finding the Longest Sentence</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        Let's consider a new task: finding the length of the longest sentence in a paragraph. Our data is a sequence of cards, with one word per card. A sentence ends when we see a word with a full stop.
                    </p>
                    <p class="text-lg text-slate-700 mb-4">
                        The problem here is that the length of a sentence isn't written on any single card. To get the length of the first sentence, we have to count its words: "It", "was", "Monday", "morning." — that's 4 words. To get the length of the second sentence, we have to count its words, and so on.
                    </p>
                    <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg my-6">
                        <p class="font-semibold">The Core Problem:</p>
                        <p>The value we want to maximize (sentence length) must be calculated first. This calculation (counting words until a full stop) is our "local operation."</p>
                    </div>
                </section>

                <!-- The Solution Section -->
                <section id="solution" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Two-Variable Solution</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        We can solve this efficiently by using two variables instead of one:
                    </p>
                    <ul class="list-disc list-inside space-y-4 text-lg text-slate-700">
                        <li>
                            <strong>`current_count`</strong>: This variable performs the local operation. It counts the words in the sentence we are currently processing. It starts at 0 and increments for each word.
                        </li>
                        <li>
                            <strong>`longest_sentence`</strong>: This is our familiar "max so far" variable. It holds the length of the longest sentence we've found up to this point. It's initialized to 0.
                        </li>
                    </ul>
                     <div class="bg-sky-100 border-l-4 border-sky-500 text-sky-800 p-4 rounded-r-lg my-6">
                        <h4 class="font-semibold">The Process:</h4>
                        <ol class="list-decimal list-inside mt-2">
                            <li>As we see each word of a sentence, we increment `current_count`.</li>
                            <li>When we hit a full stop, the sentence is over. We now have a final value for `current_count`.</li>
                            <li>We compare `current_count` to `longest_sentence`. If `current_count` is bigger, we update `longest_sentence`.</li>
                            <li><strong>Crucially</strong>, we then <strong>reset `current_count` to 0</strong> to start counting the next sentence from scratch.</li>
                        </ol>
                    </div>
                    <p class="text-lg text-slate-700">
                        By repeating this process, `longest_sentence` will hold the overall maximum length by the time we've read the last word of the paragraph, all within a single pass!
                    </p>
                </section>

                <!-- Interactive Simulator Section -->
                <section id="interactive-sim" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">⚙️ Longest Sentence Simulator</h2>
                    <p class="text-lg text-slate-700 mb-6">
                        See the two-variable pattern in action! This simulator processes a short paragraph word by word. Watch how `Current Sentence Count` builds up and then gets compared to `Longest Sentence So Far` at the end of each sentence.
                    </p>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <div class="flex justify-center space-x-4 mb-4">
                            <button id="start-sim-btn" class="px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75 transition-colors">Start</button>
                            <button id="reset-sim-btn" class="px-6 py-2 bg-slate-500 text-white font-semibold rounded-lg shadow-md hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-opacity-75 transition-colors">Reset</button>
                        </div>
                        <div id="sim-status" class="text-center font-semibold text-lg h-8 mb-4 text-slate-700">Press 'Start' to begin.</div>
                         <div class="text-center mb-6">
                            <h4 class="font-bold mb-2">Current Word</h4>
                            <div id="current-word-display" class="w-48 mx-auto h-20 bg-white rounded-lg shadow-lg border-2 border-sky-400 flex flex-col justify-center items-center transition-all duration-300">
                                <span id="current-word-value" class="text-3xl font-bold text-sky-800">...</span>
                            </div>
                        </div>
                        <div class="flex justify-around items-center">
                            <div class="text-center">
                                <h4 class="font-bold mb-2">Current Sentence Count</h4>
                                <div class="w-32 h-32 bg-white rounded-full shadow-lg border-2 border-indigo-400 flex flex-col justify-center items-center">
                                     <span id="current-count-value" class="text-5xl font-bold text-indigo-600">0</span>
                                </div>
                            </div>
                             <div class="text-center">
                                <h4 class="font-bold mb-2">Longest Sentence So Far</h4>
                                <div id="max-len-display" class="w-32 h-32 bg-white rounded-full shadow-lg border-2 border-amber-400 flex flex-col justify-center items-center">
                                     <span id="max-len-value" class="text-5xl font-bold text-amber-600">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Quiz Section -->
                <section id="quiz">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">🧠 Knowledge Check</h2>
                    <p class="text-lg text-slate-700 mb-8">
                        Let's test what you've learned about this more advanced pattern.
                    </p>
                    <div id="quiz-container" class="space-y-8">
                        <!-- Questions will be injected here by JavaScript -->
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // --- Sidebar and Scroll Logic ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const navLinks = document.getElementById('nav-links');

        hamburgerBtn.addEventListener('click', () => sidebar.classList.toggle('-translate-x-full'));
        navLinks.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
            }
        });
        
        const sections = document.querySelectorAll('section');
        const links = document.querySelectorAll('.sidebar-link');
        mainContent.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (mainContent.scrollTop >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            links.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === `#${current}`);
            });
        });

        // --- Interactive Simulator Logic ---
        const startSimBtn = document.getElementById('start-sim-btn');
        const resetSimBtn = document.getElementById('reset-sim-btn');
        const simStatus = document.getElementById('sim-status');
        const currentWordValueEl = document.getElementById('current-word-value');
        const currentCountValueEl = document.getElementById('current-count-value');
        const maxLenValueEl = document.getElementById('max-len-value');
        const maxLenDisplayEl = document.getElementById('max-len-display');
        
        const paragraph = "It was Monday morning. Swaminathan was reluctant to open his eyes. He shuddered at the very thought of school.".split(' ');
        let simInterval;

        function resetSimulator() {
            clearInterval(simInterval);
            simStatus.textContent = "Press 'Start' to begin.";
            currentWordValueEl.textContent = '...';
            currentCountValueEl.textContent = '0';
            maxLenValueEl.textContent = '0';
            startSimBtn.disabled = false;
        }

        startSimBtn.addEventListener('click', () => {
            startSimBtn.disabled = true;
            let wordIndex = 0;
            let currentCount = 0;
            let maxLen = 0;

            simInterval = setInterval(() => {
                if (wordIndex >= paragraph.length) {
                    clearInterval(simInterval);
                    simStatus.textContent = `Done! The longest sentence had ${maxLen} words.`;
                    startSimBtn.disabled = false;
                    return;
                }

                const word = paragraph[wordIndex];
                currentWordValueEl.textContent = word;
                currentCount++;
                currentCountValueEl.textContent = currentCount;
                simStatus.textContent = `Counting word: "${word}"`;

                if (word.includes('.')) {
                    simStatus.textContent = `End of sentence! Length is ${currentCount}.`;
                    if (currentCount > maxLen) {
                        maxLen = currentCount;
                        maxLenValueEl.textContent = maxLen;
                        maxLenDisplayEl.classList.add('animate-pulse');
                        setTimeout(() => maxLenDisplayEl.classList.remove('animate-pulse'), 600);
                        simStatus.textContent += ' New longest sentence!';
                    }
                    currentCount = 0;
                    // Use a timeout to show the reset of the counter
                    setTimeout(() => {
                         currentCountValueEl.textContent = 0;
                    }, 500);
                }

                wordIndex++;
            }, 1000);
        });

        resetSimBtn.addEventListener('click', resetSimulator);
        resetSimulator();
        
        // --- Quiz Logic ---
        const quizContainer = document.getElementById('quiz-container');
        const quizData = [
            // From AQ2_3.docx
            {
                question: "Suppose we wish to find the shortest sentence in the “Paragraph words” dataset. We use two variables, `min` and `count`. Which of the following is a valid initialisation for `min`?",
                options: ["0", "3", "10000"],
                correct: ["10000"],
                type: "single",
                explanation: "To find a minimum, you must initialize with a value guaranteed to be *larger* than any possible value. 0 and 3 are likely sentence lengths, but 10000 is safely larger than any sentence will be."
            },
            {
                question: "A programmer wants to find the length of the longest word. They write: 'Step 4: If letter count < max, then set max equal to letter count'. What is the mistake?",
                options: ["Step-2", "Step-3", "Step-4", "There is no mistake."],
                correct: ["Step-4"],
                type: "single",
                explanation: "The comparison is wrong. To find the *longest* word, the condition should be `If letter count > max`."
            },
            // New questions
            {
                question: "In the 'longest sentence' problem, why is the `current_count` variable reset to 0 after each sentence?",
                options: [
                    "To save memory.",
                    "To start the count for the next sentence from scratch.",
                    "To find the average sentence length.",
                    "It is a mistake in the algorithm."
                ],
                correct: ["To start the count for the next sentence from scratch."],
                type: "single",
                explanation: "Resetting the counter is essential to ensure we are measuring the length of each sentence independently."
            },
            {
                question: "True or False: The two-variable pattern for finding the max (e.g., `current_count` and `longest_sentence`) requires two full iterations through the data.",
                options: ["True", "False"],
                correct: ["False"],
                type: "single",
                explanation: "False. The entire process is completed in a single iteration. Both the local operation (counting) and the comparison happen as we go through the data once."
            },
            {
                question: "Which of these problems would also require a two-variable, 'local operation' approach? (Select all that apply)",
                options: [
                    "Finding the highest single-day temperature in a month's worth of data.",
                    "Finding which shop had the highest total revenue across many individual sales receipts.",
                    "Finding the student with the highest single exam score from a list of students.",
                    "Finding the month with the most number of students born in it from a class list."
                ],
                correct: ["Finding which shop had the highest total revenue across many individual sales receipts.", "Finding the month with the most number of students born in it from a class list."],
                type: "multiple",
                explanation: "Both finding total revenue per shop and counting students per month require a local operation (summing/counting for that group) before comparing to the overall maximum."
            },
            {
                question: "What is the primary role of the `longest_sentence` variable in the algorithm?",
                options: [
                    "To count words in the current sentence.",
                    "To remember the words of the longest sentence.",
                    "To store the maximum length found among the sentences processed so far.",
                    "To mark the end of the paragraph."
                ],
                correct: ["To store the maximum length found among the sentences processed so far."],
                type: "single",
                explanation: "This variable acts as our 'max so far' memory, only being updated when a longer sentence is completed."
            }
        ];

        function buildQuiz() {
            quizContainer.innerHTML = ''; // Clear previous quiz
            quizData.forEach((q, index) => {
                const isMultiple = q.type === 'multiple';
                const inputType = isMultiple ? 'checkbox' : 'radio';
                const optionsHtml = q.options.map(option => `
                    <label class="quiz-option block p-3 border-2 border-slate-200 rounded-lg hover:bg-sky-50 cursor-pointer transition-colors">
                        <input type="${inputType}" name="q${index}" value="${option}" class="mr-3">
                        ${option}
                    </label>
                `).join('');
                const questionHtml = `
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <p class="text-lg font-semibold mb-4">${index + 1}. ${q.question}</p>
                        <div class="space-y-3" id="q${index}-options">${optionsHtml}</div>
                        <div id="feedback-${index}" class="feedback"></div>
                    </div>
                `;
                quizContainer.innerHTML += questionHtml;
            });
            quizData.forEach((q, index) => {
                document.getElementById(`q${index}-options`).addEventListener('change', () => handleAnswer(q, index));
            });
        }

        function handleAnswer(questionData, questionIndex) {
            const feedbackEl = document.getElementById(`feedback-${questionIndex}`);
            const inputs = document.querySelectorAll(`input[name="q${questionIndex}"]`);
            let selectedAnswers = [];
            inputs.forEach(input => {
                if (input.checked) selectedAnswers.push(input.value);
                input.disabled = true;
            });
            let isCorrect = (questionData.type === 'single') ?
                (selectedAnswers.length === 1 && selectedAnswers[0] === questionData.correct[0]) :
                (selectedAnswers.length === questionData.correct.length && selectedAnswers.every(val => questionData.correct.includes(val)));
            
            inputs.forEach(input => {
                const label = input.parentElement;
                if (questionData.correct.includes(input.value)) {
                    label.classList.add('correct');
                } else if (input.checked) {
                    label.classList.add('incorrect');
                }
            });

            feedbackEl.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${questionData.explanation}`;
            feedbackEl.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
        }

        buildQuiz();
    </script>
</body>
</html>
