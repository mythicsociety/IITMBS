<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L2.8: Flowchart for Max Marks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .sidebar-link.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0c4a6e; /* sky-900 */
            font-weight: 600;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .feedback {
            display: none;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
        }
        .feedback.correct {
            display: block;
            background-color: #f0fdf4; /* green-50 */
            color: #15803d; /* green-800 */
        }
        .feedback.incorrect {
            display: block;
            background-color: #fef2f2; /* red-50 */
            color: #b91c1c; /* red-800 */
        }
        /* Flowchart highlighting */
        .flowchart-element {
            transition: all 0.3s ease-in-out;
        }
        .flowchart-element.highlight .shape {
            fill: #fef9c3; /* yellow-100 */
            stroke: #facc15; /* yellow-400 */
            stroke-width: 2.5;
        }
         .flowchart-element.highlight .text {
            font-weight: 700;
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Mobile Header with Hamburger Menu -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40 lg:hidden flex items-center justify-between p-4">
        <h1 class="text-lg font-bold text-sky-800">Learning Guide</h1>
        <button id="hamburger-btn" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </header>

    <div class="flex">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="bg-white w-64 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:sticky lg:top-0 h-screen transition-transform duration-300 ease-in-out z-50 shadow-lg lg:shadow-none border-r border-slate-200">
            <div class="p-6">
                <h2 class="text-xl font-bold text-sky-800 mb-6">L2.8: Flowchart for Max Marks</h2>
                <nav>
                    <ul id="nav-links" class="space-y-2">
                        <li><a href="#intro" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Introduction</a></li>
                        <li><a href="#components" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Flowchart Components</a></li>
                        <li><a href="#the-flowchart" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">The "Find Max" Flowchart</a></li>
                        <li><a href="#interactive-sim" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Interactive Flowchart Tracer</a></li>
                        <li><a href="#quiz" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Knowledge Check</a></li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 p-6 md:p-10 lg:p-12 bg-slate-50 min-h-screen lg:h-screen lg:overflow-y-auto">
            <div class="max-w-4xl mx-auto">

                <!-- Introduction Section -->
                <section id="intro" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Visualizing Logic üó∫Ô∏è</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        We've talked a lot about the step-by-step procedures, or algorithms, for solving problems. While writing these steps as text (like in pseudocode) is effective, sometimes a picture is worth a thousand words.
                    </p>
                    <p class="text-lg text-slate-700">
                        A <strong>flowchart</strong> is a diagram that represents an algorithm visually. It uses standard shapes to show different types of actions and arrows to show the flow of control. This makes it easy to understand the logic, decisions, and loops within a procedure at a glance.
                    </p>
                </section>

                <!-- Components Section -->
                <section id="components" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Building Blocks of a Flowchart</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        Flowcharts use a few key shapes to represent different parts of a process:
                    </p>
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        <div class="bg-white p-4 rounded-lg shadow">
                            <svg viewBox="0 0 100 50" class="h-12 mx-auto mb-2"><rect x="10" y="5" width="80" height="40" rx="20" class="fill-sky-200 stroke-sky-500 stroke-2"/></svg>
                            <h4 class="font-bold">Terminator</h4>
                            <p class="text-sm text-slate-600">The oval shape indicates the Start and End points of the algorithm.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow">
                            <svg viewBox="0 0 100 50" class="h-12 mx-auto mb-2"><rect x="10" y="5" width="80" height="40" class="fill-sky-200 stroke-sky-500 stroke-2"/></svg>
                            <h4 class="font-bold">Process</h4>
                            <p class="text-sm text-slate-600">A rectangle represents an action or operation, like initializing a variable or performing a calculation.</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow">
                            <svg viewBox="0 0 100 50" class="h-12 mx-auto mb-2"><path d="M 10 25 L 50 5 L 90 25 L 50 45 Z" class="fill-sky-200 stroke-sky-500 stroke-2"/></svg>
                            <h4 class="font-bold">Decision</h4>
                            <p class="text-sm text-slate-600">A diamond shape represents a question or a branch in the process, typically with "Yes" and "No" outcomes.</p>
                        </div>
                    </div>
                </section>

                <!-- The Flowchart Section -->
                <section id="the-flowchart" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The "Find Max" Flowchart Explained</h2>
                    <p class="text-lg text-slate-700 mb-6">
                        Let's map our procedure for finding the maximum Maths marks to a flowchart.
                    </p>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <img src="https://i.imgur.com/8a3eY2g.png" alt="Flowchart for finding maximum marks" class="mx-auto">
                        <ol class="list-decimal list-inside space-y-3 text-lg text-slate-700 mt-6">
                            <li><strong>Start:</strong> The procedure begins.</li>
                            <li><strong>Initialize:</strong> We perform a process: set our variable `max` to 0.</li>
                            <li><strong>Decision 1 (The Loop):</strong> We ask a question: "Are there more cards in Pile 1?". If No, we follow the arrow to the End. If Yes, we proceed.</li>
                            <li><strong>Process Cards:</strong> We perform two actions: Pick a card X, and then Move it to Pile 2.</li>
                            <li><strong>Decision 2 (The Comparison):</strong> We ask another question: "Is the score on Card X greater than our current `max`?".</li>
                            <li><strong>Conditional Update:</strong> If Yes, we perform a process: update `max` to be the score from Card X. If No, we skip this step.</li>
                            <li><strong>Return to Loop:</strong> Both paths from the comparison lead back to the start of the loop (Decision 1).</li>
                        </ol>
                    </div>
                </section>

                <!-- Interactive Simulator Section -->
                <section id="interactive-sim" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">‚öôÔ∏è Interactive Flowchart Tracer</h2>
                    <p class="text-lg text-slate-700 mb-6">
                        Let's trace the execution path. We have a small dataset of 4 cards. Click "Next Step" to move through the flowchart and see how the variables change.
                    </p>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <div class="flex justify-center space-x-4 mb-4">
                            <button id="next-step-btn" class="px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75 transition-colors">Next Step</button>
                            <button id="reset-sim-btn" class="px-6 py-2 bg-slate-500 text-white font-semibold rounded-lg shadow-md hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-opacity-75 transition-colors">Reset</button>
                        </div>
                        <div id="sim-status" class="text-center font-semibold text-lg h-8 mb-4 text-slate-700">Press 'Next Step' to begin.</div>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                            <div>
                                <svg id="interactive-flowchart" width="100%" height="100%" viewBox="0 0 400 450" xmlns="http://www.w3.org/2000/svg" class="max-w-sm mx-auto">
                                    <style>
                                        .shape { fill: #f0f9ff; stroke: #7dd3fc; stroke-width: 1.5; }
                                        .line { stroke: #475569; stroke-width: 1.5; marker-end: url(#arrowhead); fill: none; }
                                        .text { font-family: 'Inter', sans-serif; font-size: 12px; fill: #1e293b; text-anchor: middle; }
                                        .label-text { font-family: 'Inter', sans-serif; font-size: 10px; fill: #475569; text-anchor: middle; }
                                    </style>
                                    <g id="flow-start" class="flowchart-element"><rect x="150" y="10" width="100" height="40" rx="20" class="shape" /><text x="200" y="35" class="text">Start</text></g>
                                    <g id="flow-init" class="flowchart-element"><rect x="150" y="70" width="100" height="40" rx="5" class="shape" /><text x="200" y="95" class="text">max = 0</text></g>
                                    <g id="flow-loop" class="flowchart-element"><path d="M 100 165 L 200 130 L 300 165 L 200 200 Z" class="shape" /><text x="200" y="168" class="text">More cards?</text></g>
                                    <g id="flow-process" class="flowchart-element"><rect x="125" y="220" width="150" height="40" rx="5" class="shape" /><text x="200" y="245" class="text">Pick & Move Card</text></g>
                                    <g id="flow-compare" class="flowchart-element"><path d="M 100 315 L 200 280 L 300 315 L 200 350 Z" class="shape" /><text x="200" y="310" class="text">CardX.score > max?</text></g>
                                    <g id="flow-update" class="flowchart-element"><rect x="275" y="370" width="120" height="40" rx="5" class="shape" /><text x="335" y="395" class="text">max = CardX.score</text></g>
                                    <g id="flow-end" class="flowchart-element"><rect x="350" y="145" width="50" height="40" rx="20" class="shape" /><text x="375" y="170" class="text">End</text></g>
                                    
                                    <path d="M 200 50 v 20" class="line" /><path d="M 200 110 v 20" class="line" /><path d="M 300 165 h 50" class="line" /><text x="325" y="155" class="label-text">No</text>
                                    <path d="M 200 200 v 20" class="line" /><text x="210" y="215" class="label-text">Yes</text><path d="M 200 260 v 20" class="line" />
                                    <path d="M 300 315 h 35" class="line" /><text x="315" y="305" class="label-text">Yes</text>
                                    <path d="M 200 350 v 40 h -150 v -225" class="line" /><text x="180" y="370" class="label-text">No</text>
                                    <path d="M 275 390 h -225 v -225" class="line" />
                                </svg>
                            </div>
                            <div class="space-y-4">
                                <div class="text-center">
                                    <h4 class="font-bold mb-2">Dataset</h4>
                                    <div id="dataset-display" class="flex justify-center gap-2"></div>
                                </div>
                                <div class="text-center">
                                    <h4 class="font-bold mb-2">Variable: max</h4>
                                    <div id="max-var-display" class="text-3xl font-bold text-amber-600 p-4 bg-amber-100 rounded-lg">0</div>
                                </div>
                                <div class="text-center">
                                    <h4 class="font-bold mb-2">Current Card</h4>
                                    <div id="current-card-display" class="text-3xl font-bold text-sky-600 p-4 bg-sky-100 rounded-lg">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Quiz Section -->
                <section id="quiz">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">üß† Knowledge Check</h2>
                    <p class="text-lg text-slate-700 mb-8">
                        Test your understanding of the flowchart's logic and execution.
                    </p>
                    <div id="quiz-container" class="space-y-8"></div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // --- Sidebar and Scroll Logic ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const navLinks = document.getElementById('nav-links');

        hamburgerBtn.addEventListener('click', () => sidebar.classList.toggle('-translate-x-full'));
        navLinks.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
            }
        });
        
        const sections = document.querySelectorAll('section');
        const links = document.querySelectorAll('.sidebar-link');
        mainContent.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (mainContent.scrollTop >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            links.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === `#${current}`);
            });
        });

        // --- Interactive Flowchart Tracer Logic ---
        const nextStepBtn = document.getElementById('next-step-btn');
        const resetSimBtn = document.getElementById('reset-sim-btn');
        const simStatus = document.getElementById('sim-status');
        const datasetDisplay = document.getElementById('dataset-display');
        const maxVarDisplay = document.getElementById('max-var-display');
        const currentCardDisplay = document.getElementById('current-card-display');
        const flowchartElements = document.querySelectorAll('.flowchart-element');

        const dataset = [75, 62, 88, 81];
        let simState = {};

        function highlightElement(id) {
            flowchartElements.forEach(el => el.classList.remove('highlight'));
            if (id) {
                document.getElementById(id).classList.add('highlight');
            }
        }

        function resetSimulator() {
            simState = {
                step: 0,
                max: 0,
                cardIndex: -1,
                cards: [...dataset],
                currentCard: null
            };
            nextStepBtn.disabled = false;
            updateUI();
            simStatus.textContent = "Press 'Next Step' to begin.";
            highlightElement(null);
        }
        
        function updateUI() {
            datasetDisplay.innerHTML = simState.cards.map((card, index) => 
                `<div class="w-10 h-10 flex items-center justify-center rounded ${index <= simState.cardIndex ? 'bg-slate-200 text-slate-400' : 'bg-white shadow'}">${card}</div>`
            ).join('');
            maxVarDisplay.textContent = simState.max;
            currentCardDisplay.textContent = simState.currentCard === null ? '-' : simState.currentCard;
        }

        const steps = [
            { id: 'flow-start', status: 'Starting the procedure.' },
            { id: 'flow-init', status: 'Initializing max = 0.', action: s => s.max = 0 },
            { id: 'flow-loop', status: 'Are there more cards?', action: s => s.cardIndex++ },
            { id: 'flow-process', status: 'Picking next card.', action: s => s.currentCard = s.cards[s.cardIndex] },
            { id: 'flow-compare', status: 'Is card value > max?' },
            { id: 'flow-update', status: 'Yes. Updating max.', action: s => s.max = s.currentCard },
            { id: 'flow-loop', status: 'No. Looping back.' },
            { id: 'flow-end', status: 'No more cards. Procedure ends.' },
        ];

        nextStepBtn.addEventListener('click', () => {
            const currentStep = steps[simState.step];
            highlightElement(currentStep.id);
            simStatus.textContent = currentStep.status;
            if (currentStep.action) currentStep.action(simState);
            
            // Logic for next step
            if (simState.step === 0) simState.step = 1; // Start -> Init
            else if (simState.step === 1) simState.step = 2; // Init -> Loop
            else if (simState.step === 2) { // Loop
                if (simState.cardIndex < simState.cards.length) simState.step = 3; // -> Process
                else simState.step = 7; // -> End
            }
            else if (simState.step === 3) simState.step = 4; // Process -> Compare
            else if (simState.step === 4) { // Compare
                if (simState.currentCard > simState.max) simState.step = 5; // -> Update
                else simState.step = 6; // -> Loop back
            }
            else if (simState.step === 5) simState.step = 2; // Update -> Loop
            else if (simState.step === 6) simState.step = 2; // Loop back -> Loop
            
            if (simState.step === 7) nextStepBtn.disabled = true;

            updateUI();
        });

        resetSimBtn.addEventListener('click', resetSimulator);
        resetSimulator();
        
        // --- Quiz Logic ---
        const quizContainer = document.getElementById('quiz-container');
        const quizData = [
            // From AQ2_8.docx
            {
                question: "If there are N cards in the dataset, how many times is the first decision block ('More cards in Pile 1?') visited?",
                options: ["N", "N+1"],
                correct: ["N+1"],
                type: "single",
                explanation: "The loop condition is checked N times for each card, plus one final time when it evaluates to false and the loop terminates. Total visits = N + 1."
            },
            {
                question: "A programmer changes the second decision to `CardX.Maths < max?`. What does `max` store at the end?",
                options: ["It stores the maximum maths marks", "It stores the minimum maths marks", "It stores the value 0", "Insufficient information"],
                correct: ["It stores the value 0"],
                type: "single",
                explanation: "`max` is initialized to 0. The condition `CardX.Maths < 0` will never be true for any valid score. Therefore, the update block is never visited and `max` remains 0."
            },
            {
                question: "Continuing with the previous question (where the check is `CardX.Maths < max?`), how many times will the block `max = CardX.Maths` be visited?",
                options: ["0", "1", "2", "3"],
                correct: ["0"],
                type: "single",
                explanation: "As explained above, since `max` starts at 0 and scores are non-negative, the condition `CardX.Maths < max` is never met, so the update block is never executed."
            },
            {
                question: "The programmer changes the initialization block to `max = 98`. What would `max` store at the end? (MSQ)",
                options: [
                    "It will store the maximum maths marks",
                    "It will store the maximum maths marks, provided there is at least one student who has scored greater than or equal to 98",
                    "If no student has scored more than 98, `max` will store the value 98",
                    "Insufficient information"
                ],
                correct: ["It will store the maximum maths marks, provided there is at least one student who has scored greater than or equal to 98", "If no student has scored more than 98, `max` will store the value 98"],
                type: "multiple",
                explanation: "If there's a score >= 98, the algorithm will find the true max from that point. If all scores are below 98, the condition `CardX.Maths > max` will never be true, and `max` will retain its initial value of 98."
            }
        ];

        function buildQuiz() {
            quizContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const isMultiple = q.type === 'multiple';
                const inputType = isMultiple ? 'checkbox' : 'radio';
                const optionsHtml = q.options.map(option => `
                    <label class="quiz-option block p-3 border-2 border-slate-200 rounded-lg hover:bg-sky-50 cursor-pointer transition-colors">
                        <input type="${inputType}" name="q${index}" value="${option}" class="mr-3">
                        ${option}
                    </label>
                `).join('');
                const questionHtml = `
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <p class="text-lg font-semibold mb-4">${index + 1}. ${q.question}</p>
                        <div class="space-y-3" id="q${index}-options">${optionsHtml}</div>
                        <div id="feedback-${index}" class="feedback"></div>
                    </div>
                `;
                quizContainer.innerHTML += questionHtml;
            });
            quizData.forEach((q, index) => {
                document.getElementById(`q${index}-options`).addEventListener('change', () => handleAnswer(q, index));
            });
        }

        function handleAnswer(questionData, questionIndex) {
            const feedbackEl = document.getElementById(`feedback-${questionIndex}`);
            const inputs = document.querySelectorAll(`input[name="q${questionIndex}"]`);
            let selectedAnswers = [];
            inputs.forEach(input => {
                if (input.checked) selectedAnswers.push(input.value);
                input.disabled = true;
            });
            let isCorrect;
            if (questionData.type === 'multiple') {
                 isCorrect = selectedAnswers.length === questionData.correct.length && selectedAnswers.every(val => questionData.correct.includes(val));
            } else {
                isCorrect = selectedAnswers.length === 1 && selectedAnswers[0] === questionData.correct[0];
            }
            
            inputs.forEach(input => {
                const label = input.parentElement;
                if (questionData.correct.includes(input.value)) {
                    label.classList.add('correct');
                } else if (input.checked) {
                    label.classList.add('incorrect');
                }
            });

            feedbackEl.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${questionData.explanation}`;
            feedbackEl.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
        }

        buildQuiz();
    </script>
</body>
</html>
