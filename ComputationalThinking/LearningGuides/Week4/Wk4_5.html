<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L4.5: Concept of Fair Teams</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .sidebar-link.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0c4a6e; /* sky-900 */
            font-weight: 600;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
        .quiz-option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
        .feedback {
            display: none;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
        }
        .feedback.correct {
            display: block;
            background-color: #f0fdf4; /* green-50 */
            color: #15803d; /* green-800 */
        }
        .feedback.incorrect {
            display: block;
            background-color: #fef2f2; /* red-50 */
            color: #b91c1c; /* red-800 */
        }
        .code-block {
            background-color: #0f172a; /* slate-900 */
            color: #e2e8f0; /* slate-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .code-keyword { color: #7dd3fc; } /* sky-300 */
        .code-variable { color: #f8fafc; } /* slate-50 */
        .code-value { color: #fcd34d; } /* amber-300 */
        .code-comment { color: #94a3b8; } /* slate-400 */
        .code-proc { color: #a5b4fc; } /* indigo-300 */
        .team-card {
            border-left-width: 4px;
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Mobile Header with Hamburger Menu -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40 lg:hidden flex items-center justify-between p-4">
        <h1 class="text-lg font-bold text-sky-800">Learning Guide</h1>
        <button id="hamburger-btn" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </header>

    <div class="flex">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="bg-white w-64 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:sticky lg:top-0 h-screen transition-transform duration-300 ease-in-out z-50 shadow-lg lg:shadow-none border-r border-slate-200">
            <div class="p-6">
                <h2 class="text-xl font-bold text-sky-800 mb-6">L4.5: Fair Teams</h2>
                <nav>
                    <ul id="nav-links" class="space-y-2">
                        <li><a href="#intro" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Introduction</a></li>
                        <li><a href="#challenge" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">The Challenge of Fairness</a></li>
                        <li><a href="#solution" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">The Binning Solution</a></li>
                        <li><a href="#interactive-sim" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Interactive Team Former</a></li>
                        <li><a href="#quiz" class="sidebar-link block px-4 py-2 rounded-md text-slate-600 hover:bg-sky-50 transition-colors">Knowledge Check</a></li>
                    </ul>
                </nav>
            </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 p-6 md:p-10 lg:p-12 bg-slate-50 min-h-screen lg:h-screen lg:overflow-y-auto">
            <div class="max-w-4xl mx-auto">

                <!-- Introduction Section -->
                <section id="intro" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">Creating Balanced Teams üßë‚Äçü§ù‚Äçüßë</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        We've seen how binning can dramatically speed up the process of finding pairs with shared properties. Now, let's explore another powerful application of this technique: creating fair and balanced teams.
                    </p>
                    <p class="text-lg text-slate-700">
                        Whether it's for a sports tournament, a group project, or a quiz competition, ensuring that teams are evenly matched is a common and important problem. Binning provides a systematic way to achieve this fairness.
                    </p>
                </section>

                <!-- The Challenge of Fairness Section -->
                <section id="challenge" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Challenge of Fairness</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        What makes a team "fair"? If we're creating teams for an academic competition, a fair approach would be to balance the academic strength of the teams. We don't want one team with all the top students and another with all the struggling students.
                    </p>
                     <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-4 rounded-r-lg my-6">
                        <p class="font-semibold">The Problem:</p>
                        <p>If we pick teams randomly, we might get very unbalanced groups by pure chance. How can we create teams where the combined total scores of the members are roughly equal, ensuring a fair competition?</p>
                    </div>
                </section>

                <!-- The Binning Solution Section -->
                <section id="solution" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">The Binning Solution</h2>
                    <p class="text-lg text-slate-700 mb-4">
                        Binning provides an elegant solution. We can create balanced teams by ensuring each team has a representative from different performance levels.
                    </p>
                    <div class="bg-sky-100 border-l-4 border-sky-500 text-sky-800 p-4 rounded-r-lg my-6">
                        <h4 class="font-semibold">The Algorithm:</h4>
                        <ol class="list-decimal list-inside mt-2">
                            <li><strong>Step 1: Bin by Performance.</strong> First, we perform an iteration to categorize all students into bins based on their total scores. For example:
                                <ul class="list-disc list-inside ml-6 my-2">
                                    <li>Bin 1: Scores 201-225</li>
                                    <li>Bin 2: Scores 226-250</li>
                                    <li>Bin 3: Scores 251-275</li>
                                    <li>Bin 4: Scores 276-300</li>
                                </ul>
                            </li>
                            <li><strong>Step 2: Form Teams.</strong> To create the first team, we pick one student at random from Bin 1, one from Bin 2, one from Bin 3, and one from Bin 4. We repeat this process to form the second team, the third team, and so on, until all students are assigned.</li>
                        </ol>
                        <p class="mt-2">Because every team has a mix of students from high, medium, and low performance bins, their combined team scores are much more likely to be balanced and fair.</p>
                    </div>
                </section>
                
                <!-- Interactive Simulator Section -->
                <section id="interactive-sim" class="mb-12">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">‚öôÔ∏è Fair Team Former</h2>
                    <p class="text-lg text-slate-700 mb-6">
                        This simulator demonstrates the team-forming process.
                        <br><strong>Step 1:</strong> Bins students by their total score into four performance categories.
                        <br><strong>Step 2:</strong> Automatically forms balanced teams by picking one student from each bin.
                    </p>
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <div class="flex justify-center space-x-4 mb-4">
                            <button id="bin-btn" class="px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700">Step 1: Bin Students</button>
                            <button id="team-btn" class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700" disabled>Step 2: Form Teams</button>
                            <button id="reset-sim-btn" class="px-6 py-2 bg-slate-500 text-white font-semibold rounded-lg shadow-md hover:bg-slate-600">Reset</button>
                        </div>
                        <div id="sim-status" class="text-center font-semibold text-lg h-8 mb-4 text-slate-700">Press 'Bin Students' to start.</div>
                        <div id="main-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div id="bins-container" class="space-y-4"></div>
                            <div id="teams-container" class="space-y-4"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Quiz Section -->
                <section id="quiz">
                    <h2 class="text-3xl font-bold text-sky-900 mb-4 border-b-2 border-sky-200 pb-2">üß† Knowledge Check</h2>
                    <p class="text-lg text-slate-700 mb-8">
                        Test your understanding of forming fair teams.
                    </p>
                    <div id="quiz-container" class="space-y-8"></div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // --- Sidebar and Scroll Logic ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const navLinks = document.getElementById('nav-links');

        hamburgerBtn.addEventListener('click', () => sidebar.classList.toggle('-translate-x-full'));
        navLinks.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
            }
        });
        
        const sections = document.querySelectorAll('section');
        const links = document.querySelectorAll('.sidebar-link');
        mainContent.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (mainContent.scrollTop >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            links.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === `#${current}`);
            });
        });

        // --- Interactive Simulator Logic ---
        const binBtn = document.getElementById('bin-btn');
        const teamBtn = document.getElementById('team-btn');
        const resetSimBtn = document.getElementById('reset-sim-btn');
        const simStatus = document.getElementById('sim-status');
        const binsContainer = document.getElementById('bins-container');
        const teamsContainer = document.getElementById('teams-container');
        
        let students = [];
        let bins = {};
        const BINS_DEF = {
            "201-225": { min: 201, max: 225, students: [] },
            "226-250": { min: 226, max: 250, students: [] },
            "251-275": { min: 251, max: 275, students: [] },
            "276-300": { min: 276, max: 300, students: [] }
        };

        function createStudent(id) {
             return { id: id, total: Math.floor(Math.random() * 100) + 201 };
        }

        function renderBins() {
            binsContainer.innerHTML = '<h4 class="font-bold text-center">Student Bins</h4>';
            Object.keys(bins).forEach(binKey => {
                const binEl = document.createElement('div');
                binEl.className = `p-2 rounded-lg bg-slate-100 border-2 border-slate-200`;
                let studentsHTML = bins[binKey].students.map(s => 
                    `<div class="p-1 text-xs rounded bg-white shadow">ID: ${s.id+1} (Score: ${s.total})</div>`
                ).join('');
                binEl.innerHTML = `<h4 class="font-semibold text-center text-sm mb-2">Bin: ${binKey}</h4><div class="flex flex-wrap gap-1">${studentsHTML}</div>`;
                binsContainer.appendChild(binEl);
            });
        }
        
        function resetSimulator() {
            students = Array.from({length: 12}, (_, i) => createStudent(i));
            bins = JSON.parse(JSON.stringify(BINS_DEF)); // Deep copy
            simStatus.textContent = "Press 'Bin Students' to start.";
            renderBins();
            teamsContainer.innerHTML = '';
            binBtn.disabled = false;
            teamBtn.disabled = true;
        }

        binBtn.addEventListener('click', () => {
            binBtn.disabled = true;
            simStatus.textContent = "Binning students by score...";
            students.forEach(s => {
                for (const key in bins) {
                    if (s.total >= bins[key].min && s.total <= bins[key].max) {
                        bins[key].students.push(s);
                        break;
                    }
                }
            });
            setTimeout(() => {
                renderBins();
                simStatus.textContent = "Binning complete. Ready to form teams.";
                teamBtn.disabled = false;
            }, 1000);
        });
        
        teamBtn.addEventListener('click', () => {
            teamBtn.disabled = true;
            simStatus.textContent = "Forming teams...";
            teamsContainer.innerHTML = '<h4 class="font-bold text-center">Formed Teams</h4>';
            let teams = [];
            let teamCount = Math.min(...Object.values(bins).map(b => b.students.length));

            for(let i=0; i < teamCount; i++) {
                let newTeam = { members: [], total: 0 };
                Object.keys(bins).forEach(binKey => {
                    const student = bins[binKey].students.pop();
                    newTeam.members.push(student);
                    newTeam.total += student.total;
                });
                teams.push(newTeam);
            }

            teams.forEach((team, i) => {
                const teamEl = document.createElement('div');
                const colors = ['border-red-500', 'border-blue-500', 'border-green-500'];
                teamEl.className = `team-card p-3 rounded-lg bg-white shadow ${colors[i % 3]}`;
                let membersHTML = team.members.map(s => `<span class="text-xs">ID ${s.id+1} (${s.total})</span>`).join(', ');
                teamEl.innerHTML = `<div class="font-bold">Team ${i+1} <span class="font-normal text-sm">(Total: ${team.total})</span></div>
                                    <div class="text-slate-600">${membersHTML}</div>`;
                teamsContainer.appendChild(teamEl);
            });
            renderBins(); // Re-render bins to show they are empty
            simStatus.textContent = "Teams formed!";
        });

        resetSimulator();
        
        // --- Quiz Logic ---
        const quizContainer = document.getElementById('quiz-container');
        const quizData = [
            { question: "Two students X and Y satisfy: `X.Maths + X.Physics == Y.Maths + Y.Physics`. Which scenarios are possible? (MSQ)", options: ["X.Maths > Y.Maths and X.Physics > Y.Physics", "X.Maths == Y.Maths and X.Physics == Y.Physics", "X.Maths > Y.Maths and X.Physics < Y.Physics", "X.Maths < Y.Maths and X.Physics > Y.Physics"], correct: ["X.Maths == Y.Maths and X.Physics == Y.Physics", "X.Maths > Y.Maths and X.Physics < Y.Physics", "X.Maths < Y.Maths and X.Physics > Y.Physics"], type: "multiple", explanation: "The sums can be equal if the individual scores are equal, or if one score is higher for X while the other is correspondingly lower." },
            { question: "Which code blocks correctly count students in the bin '201-225' (inclusive)? (MSQ)", options: ["if(201 <= X.Total <= 225){ A = 1 }", "if(201 <= X.Total <= 225){ A = A + 1 }", "if(200 < X.Total < 226){ A = A + 1 }", "if(X.Total >= 201){ if(X.Total <= 225){ A = A + 1 } }"], correct: ["if(201 <= X.Total <= 225){ A = A + 1 }", "if(200 < X.Total < 226){ A = A + 1 }", "if(X.Total >= 201){ if(X.Total <= 225){ A = A + 1 } }"], type: "multiple", explanation: "The first option is wrong because it resets the count to 1 instead of incrementing. The other three correctly check the range (inclusive of 201 and 225) and increment the counter `A`." },
            { question: "If `isLeftHeavy(X, Y)` returns False, what is possible? (MSQ)", image: "https://i.imgur.com/L3r0i27.png", options: ["Both X and Y have scored the same total marks.", "The total marks of X is greater than that of Y.", "The total marks of Y is greater than that of X."], correct: ["Both X and Y have scored the same total marks.", "The total marks of Y is greater than that of X."], type: "multiple", explanation: "The procedure returns True only if `X.Total > Y.Total`. It returns False if `X.Total` is less than OR equal to `Y.Total`." },
            { question: "True or False: The return value of `isLeftHeavy(X, Y)` is always the opposite of `isLeftHeavy(Y, X)`.", options: ["True", "False"], correct: ["False"], type: "single", explanation: "False. If X and Y have the same total marks, both `isLeftHeavy(X, Y)` and `isLeftHeavy(Y, X)` will return False. They are not opposites in the case of a tie." },
            { question: "What is the `Mystery(M, N)` procedure doing?", image: "https://i.imgur.com/k2gXo2k.png", options: ["Checking if M scored more than N", "Checking if N scored more than M", "Checking if M scored the same as N"], correct: ["Checking if M scored the same as N"], type: "single", explanation: "The code returns True only if `isLeftHeavy(M, N)` is False AND `isLeftHeavy(N, M)` is False. This specific condition is only met when M.Total and N.Total are equal." }
        ];

        function buildQuiz() {
            quizContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const isMultiple = q.type === 'multiple';
                const inputType = isMultiple ? 'checkbox' : 'radio';
                const optionsHtml = q.options.map(option => `
                    <label class="quiz-option block p-3 border-2 border-slate-200 rounded-lg hover:bg-sky-50 cursor-pointer transition-colors">
                        <input type="${inputType}" name="q${index}" value="${option}" class="mr-3">
                        ${option}
                    </label>
                `).join('');
                const imageHtml = q.image ? `<img src="${q.image}" alt="Quiz question image" class="my-4 border rounded-md">` : '';
                const questionHtml = `
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <p class="text-lg font-semibold mb-4">${index + 1}. ${q.question}</p>
                        ${imageHtml}
                        <div class="space-y-3" id="q${index}-options">${optionsHtml}</div>
                        <div id="feedback-${index}" class="feedback"></div>
                    </div>
                `;
                quizContainer.innerHTML += questionHtml;
            });
            quizData.forEach((q, index) => {
                document.getElementById(`q${index}-options`).addEventListener('change', () => handleAnswer(q, index));
            });
        }

        function handleAnswer(questionData, questionIndex) {
            const feedbackEl = document.getElementById(`feedback-${questionIndex}`);
            const inputs = document.querySelectorAll(`[name="q${questionIndex}"]`);
            let selectedAnswers = [];
            inputs.forEach(input => {
                if (input.checked) selectedAnswers.push(input.value);
                input.disabled = true;
            });
            let isCorrect;
            if (questionData.type === 'multiple') {
                 isCorrect = selectedAnswers.length === questionData.correct.length && selectedAnswers.every(val => questionData.correct.includes(val));
            } else {
                isCorrect = selectedAnswers.length === 1 && selectedAnswers[0] === questionData.correct[0];
            }
            
            inputs.forEach(input => {
                const label = input.parentElement;
                if (questionData.correct.includes(input.value)) {
                    label.classList.add('correct');
                } else if (input.checked) {
                    label.classList.add('incorrect');
                }
            });

            feedbackEl.innerHTML = `<strong>${isCorrect ? 'Correct!' : 'Not quite.'}</strong> ${questionData.explanation}`;
            feedbackEl.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
        }

        buildQuiz();
    </script>
</body>
</html>
