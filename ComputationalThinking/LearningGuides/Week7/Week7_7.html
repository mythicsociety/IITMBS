<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L7.7: Pseudocodes for real-time examples using dictionaries</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .active-link {
            background-color: #1D4ED8; /* bg-blue-700 */
            color: white;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Mobile Header -->
    <header class="lg:hidden fixed top-0 left-0 right-0 bg-blue-600 text-white p-4 z-50 flex justify-between items-center shadow-md">
        <h1 class="text-xl font-bold">L7.7: Pseudocode Examples</h1>
        <button id="hamburger-menu" class="hamburger-icon z-50 space-y-2">
            <span class="block w-8 h-0.5 bg-white"></span>
            <span class="block w-8 h-0.5 bg-white"></span>
            <span class="block w-8 h-0.5 bg-white"></span>
        </button>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-blue-600 text-white p-6 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 lg:pt-6 pt-20 overflow-y-auto">
            <h2 class="text-2xl font-bold mb-8">Navigation</h2>
            <nav id="nav-links">
                <a href="#introduction" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Introduction</a>
                <a href="#example1" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Example 1: Food Purchases</a>
                <a href="#example2" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Example 2: Birthday Paradox</a>
                <a href="#nested-dictionaries" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Nested Dictionaries</a>
                <a href="#summary" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Summary</a>
                <a href="#quiz" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700 hover:text-white">Knowledge Check</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="lg:ml-64 p-6 md:p-10 w-full mt-16 lg:mt-0">
            <section id="introduction" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h1 class="text-4xl font-bold mb-4 text-blue-800">L7.7: Pseudocodes for Real-Time Examples Using Dictionaries</h1>
                <p class="text-lg">This final lesson brings everything together. We'll analyze the complete pseudocode for the real-world examples discussed throughout the week. By walking through these algorithms, we can see how the core dictionary operations—initialization, checking keys, assignment, and iteration—combine to create powerful and efficient solutions.</p>
                <p class="text-lg mt-4">We will also explore the advanced concept of a <strong>nested dictionary</strong>, where the value associated with a key is itself another dictionary.</p>
            </section>

            <section id="example1" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-blue-800">Example 1: Aggregating Customer Food Purchases</h2>
                <p class="text-lg mb-4"><strong>Goal:</strong> Find the total number of food items purchased by each customer across all their shopping bills.</p>
                <div class="grid md:grid-cols-2 gap-8 mt-6">
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-2">The Pseudocode</h3>
                        <div class="code-block"><code>foodD = {}

while (Table 1 has more rows) {
  Read row X from Table 1
  customer = X.CustomerName
  items = X.Items

  foreach row in items {
    if (row.Category == "Food") {
      if (isKey(foodD, customer)) {
        foodD[customer] = foodD[customer] + 1
      } else {
        foodD[customer] = 1
      }
    }
  }
}</code></div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-2">Analysis</h3>
                        <ul class="list-disc list-inside space-y-2 pl-4 text-lg">
                            <li><strong>Structure:</strong> This algorithm uses a dictionary (`foodD`) to accumulate a simple count (an integer) for each customer.</li>
                            <li><strong>Key Pattern:</strong> It perfectly illustrates the "check-then-update-or-create" pattern using <code>isKey</code>, which is fundamental to aggregation tasks.</li>
                             <li><strong>Data Types:</strong> The <strong>key</strong> is a string (the customer's name) and the <strong>value</strong> is an integer (the count).</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="example2" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-blue-800">Example 2: Solving the Birthday Paradox</h2>
                <p class="text-lg mb-4"><strong>Goal:</strong> Efficiently find all students who share a birthday and identify who they are.</p>
                <div class="grid md:grid-cols-2 gap-8 mt-6">
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-2">The Pseudocode</h3>
                        <div class="code-block"><code>birthdays = {}
duplicates = {}

while (Table 1 has more rows) {
  Read row X in Table 1
  dob = X.DoB
  seqno = X.SeqNo

  if (isKey(birthdays, dob)) {
    duplicates[dob] = True
    birthdays[dob] = birthdays[dob] ++ [seqno]
  } else {
    birthdays[dob] = [seqno]
  }
}</code></div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-2">Analysis</h3>
                         <ul class="list-disc list-inside space-y-2 pl-4 text-lg">
                            <li><strong>Complex Values:</strong> This example advances the concept by showing that a dictionary's value can be another data structure—in this case, a <strong>list</strong> of student IDs (`seqno`).</li>
                             <li><strong>Multiple Dictionaries:</strong> It uses two dictionaries: `birthdays` to group the student IDs and `duplicates` to easily track which birthdays have matches.</li>
                            <li><strong>Data Types:</strong> The <strong>key</strong> is the date of birth, and the <strong>value</strong> is a list of integers.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="nested-dictionaries" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-blue-800">Advanced Concept: Nested Dictionaries</h2>
                <p class="text-lg mb-4">We can take the birthday paradox solution a step further. Instead of storing the student IDs in a list, we can store them as keys in another, "nested" dictionary. </p>
                <div class="bg-blue-50 border-2 border-blue-200 p-6 rounded-lg shadow-sm mt-6">
                    <h3 class="text-2xl font-semibold text-blue-800">Pseudocode with a Nested Dictionary</h3>
                    <div class="code-block"><code>// ... inside the while loop ...
if (isKey(birthdays, dob)) {
    // dob key exists, so add seqno as a new key to the inner dictionary
    birthdays[dob][seqno] = True
} else {
    // dob key is new, create an empty inner dictionary for it
    birthdays[dob] = {} 
    // Add seqno as the first key to the new inner dictionary
    birthdays[dob][seqno] = True
}</code></div>
                    <p class="text-lg mt-4">Here, <code>birthdays[dob]</code> no longer holds a list, but another dictionary. The expression <code>birthdays[dob][seqno]</code> accesses a key (`seqno`) within the inner dictionary.</p>
                    <p class="text-lg mt-2 font-semibold">The main advantage is that you can now use <code>isKey(birthdays[dob], seqno)</code> to instantly check if a specific student is already listed for that birthday, which is faster than searching through a list.</p>
                </div>
            </section>

            <section id="summary" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-blue-800">Summary</h2>
                <p class="text-lg mb-4">By analyzing these pseudocode examples, we can see how dictionaries are applied to solve real problems.</p>
                <ul class="list-disc list-inside text-lg space-y-3 pl-4">
                    <li><strong>Aggregation Pattern:</strong> The `isKey` check followed by an update or creation is the standard way to aggregate data into a dictionary.</li>
                    <li><strong>Flexible Values:</strong> Dictionary values are not limited to simple numbers. They can be lists, booleans, or even other dictionaries, allowing for complex data organization.</li>
                    <li><strong>Nested Structures:</strong> A nested dictionary (a dictionary within a dictionary) is a powerful technique for creating multi-level indexed data, offering fast lookups at each level.</li>
                </ul>
            </section>

            <section id="quiz" class="mb-12 bg-white p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold mb-6 text-blue-800">Knowledge Check 🧠</h2>
                <p class="text-lg mb-6">Let's test your understanding of these pseudocode examples.</p>
                <div id="quiz-container" class="space-y-8"></div>
                <div id="quiz-results" class="mt-8 text-2xl font-bold"></div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Sidebar and navigation logic ---
            const sidebar = document.getElementById('sidebar');
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const navLinks = document.querySelectorAll('#nav-links a');
            const sections = document.querySelectorAll('main section');

            hamburgerMenu.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 1024) {
                        sidebar.classList.add('-translate-x-full');
                    }
                });
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active-link');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active-link');
                            }
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });

            sections.forEach(section => observer.observe(section));

            // --- Quiz Logic ---
            const quizContainer = document.getElementById('quiz-container');
            const quizResults = document.getElementById('quiz-results');
            let score = 0;

            const quizQuestions = [
                // --- Benchmark Questions from AQ7_7.docx ---
                {
                    question: "Consider the dictionary `foodD` discussed in the lecture. What will be the output of the procedures `isKey(foodD, \"Abhinav\")` and `isKey(foodD, \"Vignesh\")`?",
                    type: "single-choice",
                    answers: ["True, True", "True, False", "False, True", "False, False"],
                    correct: ["True, True"],
                    explanation: "Based on the lecture's data processing, both Abhinav and Vignesh had entries created in the `foodD` dictionary, so `isKey` would return True for both."
                },
                {
                    question: "If `birthdays` is a nested dictionary (`birthdays[dob][seqno]`) specified in the lecture, then what is `birthdays[dob]`?",
                    type: "single-choice",
                    answers: ["List of values of sequence numbers", "Dictionary with sequence numbers as keys", "Either True or False", "None of the above"],
                    correct: ["Dictionary with sequence numbers as keys"],
                    explanation: "`birthdays[dob]` refers to the inner data structure. In the nested dictionary version, this is another dictionary where the keys are the student sequence numbers."
                },
                {
                    question: "A pseudocode is written to find out the number of students corresponding to each dob from the nested dictionary `birthdays`. Identify the mistake(s) in the code.",
                    type: "multiple-choice",
                    answers: ["Error in line 1", "Error in line 2", "Error in line 4", "Error in line 7"],
                    correct: ["Error in line 4", "Error in line 7"],
                    explanation: "Line 4 is incorrect because you need to get the keys of the inner dictionary to count them, so it should be `foreach Y in keys(birthdays[X])`. Line 7 is incorrect because `==` is a comparison operator; assignment should be `=`. Also, the key should be `X`, not the undefined `dob`."
                },
                // --- New Questions ---
                {
                    question: "In the `foodD` example, if a customer bought food in two separate bills, how is their entry in the dictionary handled the second time?",
                    type: "single-choice",
                    answers: ["A new key is created for the customer.", "The existing value is overwritten with 1.", "The existing value (their current food count) is incremented by 1.", "It results in an error because the key already exists."],
                    correct: ["The existing value (their current food count) is incremented by 1."],
                    explanation: "The `isKey` check will be true, so the `if` block executes, adding 1 to the existing count."
                },
                {
                    question: "What is the primary advantage of using a nested dictionary for the birthday problem over using a list as the value?",
                    type: "single-choice",
                    answers: ["It uses less memory.", "It's easier to write the pseudocode.", "You can instantly check if a specific student ID is already present for a given birthday.", "It stores the student IDs in a sorted order."],
                    correct: ["You can instantly check if a specific student ID is already present for a given birthday."],
                    explanation: "With a nested dictionary, you can use `isKey(birthdays[dob], seqno)` for a fast check, whereas with a list, you would have to loop through the list to see if the `seqno` is present."
                },
                {
                    question: "In the pseudocode for the birthday paradox, the `duplicates` dictionary is essential for the algorithm to work correctly.",
                    type: "true-false",
                    answers: ["True", "False"],
                    correct: ["False"],
                    explanation: "The `duplicates` dictionary is a convenience for easily finding which dates had matches. The core logic could work just with the `birthdays` dictionary by later checking which lists/dictionaries have more than one entry."
                },
                {
                    question: "What would happen in the `foodD` pseudocode if we forgot to initialize `foodD = {}` at the beginning?",
                    type: "single-choice",
                    answers: ["The code would run but produce an incorrect result.", "The first call to `isKey(foodD, ...)` would likely cause an error because the dictionary `foodD` doesn't exist.", "It would work correctly but be less efficient.", "An empty dictionary would be created automatically."],
                    correct: ["The first call to `isKey(foodD, ...)` would likely cause an error because the dictionary `foodD` doesn't exist."],
                    explanation: "A variable must be initialized before it can be used. The pseudocode assumes the dictionary exists before any operations are performed on it."
                },
                {
                    question: "In the nested dictionary birthday example, `birthdays[\"15-Mar\"] = {}` creates a new key for a birthday and assigns an empty inner dictionary as its value.",
                    type: "true-false",
                    answers: ["True", "False"],
                    correct: ["True"],
                    explanation: "This is the correct procedure for handling a birthday seen for the first time: create its key and initialize its value as a new, empty dictionary ready to hold student IDs."
                }
            ];

            function renderQuiz() {
                quizContainer.innerHTML = quizQuestions.map((q, index) => {
                    const answersHtml = q.answers.map(answer => `
                        <label class="flex items-center space-x-3 p-3 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-100 transition has-[:checked]:bg-blue-100 has-[:checked]:border-blue-400">
                            <input type="${q.type === 'multiple-choice' ? 'checkbox' : 'radio'}" name="question${index}" value="${answer}" class="form-${q.type === 'multiple-choice' ? 'checkbox' : 'radio'} h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <span>${answer}</span>
                        </label>
                    `).join('');
                    return `
                        <div class="quiz-question" data-question-index="${index}">
                            <p class="text-lg font-semibold mb-4">${index + 1}. ${q.question}</p>
                            <div class="space-y-3">${answersHtml}</div>
                            <button class="submit-answer mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">Submit</button>
                            <div class="feedback mt-3"></div>
                        </div>
                    `;
                }).join('');
            }

            quizContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('submit-answer')) {
                    const questionDiv = e.target.closest('.quiz-question');
                    const index = parseInt(questionDiv.dataset.questionIndex);
                    const question = quizQuestions[index];
                    const feedbackDiv = questionDiv.querySelector('.feedback');
                    
                    const selectedAnswers = Array.from(questionDiv.querySelectorAll(`input[name="question${index}"]:checked`)).map(input => input.value);
                    
                    if (selectedAnswers.length === 0) {
                        feedbackDiv.innerHTML = `<p class="text-yellow-600 font-semibold">Please select an answer.</p>`;
                        return;
                    }

                    questionDiv.querySelectorAll('input').forEach(input => input.disabled = true);
                    e.target.disabled = true;
                    e.target.classList.add('opacity-50', 'cursor-not-allowed');

                    const isCorrect = question.type === 'multiple-choice' 
                        ? (selectedAnswers.length === question.correct.length && selectedAnswers.every(sa => question.correct.includes(sa)))
                        : (selectedAnswers[0] === question.correct[0]);

                    if (isCorrect) {
                        feedbackDiv.innerHTML = `<div class="p-4 bg-green-100 border-l-4 border-green-500 text-green-700"><p class="font-bold">✅ Correct!</p><p class="mt-1">${question.explanation}</p></div>`;
                        score++;
                    } else {
                        feedbackDiv.innerHTML = `<div class="p-4 bg-red-100 border-l-4 border-red-500 text-red-700"><p class="font-bold">❌ Incorrect.</p><p class="mt-1"><strong>Correct Answer(s):</strong> ${question.correct.join(', ')}</p><p class="mt-1">${question.explanation}</p></div>`;
                    }
                    
                    const answeredQuestions = document.querySelectorAll('.submit-answer:disabled').length;
                    if (answeredQuestions === quizQuestions.length) {
                        quizResults.innerHTML = `Quiz Complete! Your Score: ${score} / ${quizQuestions.length}`;
                    }
                }
            });

            renderQuiz();
        });
    </script>
</body>
</html>
